{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst apiKey = '48601287-44eda15d36b20e5cccdc82f7d';\n\nexport const searchPhotos = async (searchedValue, page) => {\n  try {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n        key: apiKey,\n        q: searchedValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response?.status || \"Network Error\");\n  };\n};","export function createGallery(imageArr) {\n  return imageArr.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) =>\n      `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n  </a>\n  <ul class=\"inform\">\n    <li class=\"inform-link\">\n      <h2 class=\"inform-title\">Likes:</h2>\n      <p class=\"inform-dan\">${likes}</p>\n    </li>\n    <li class=\"inform-link\">\n      <h2 class=\"inform-title\">Views:</h2>\n      <p class=\"inform-dan\">${views}</p>\n    </li>\n    <li class=\"inform-link\">\n      <h2 class=\"inform-title\">Comments:</h2>\n      <p class=\"inform-dan\">${comments}</p>\n    </li>\n    <li class=\"inform-link\">\n      <h2 class=\"inform-title\">Downloads:</h2>\n      <p class=\"inform-dan\">${downloads}</p>\n    </li>\n  </ul>\n</li>`\n  ).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGallery } from './js/render-functions';\nimport { searchPhotos } from './js/pixabay-api';\n\nimport axios from 'axios';\n\nlet page = 1;\nconst per_page = 15;\n\nconst searchedValue = document.querySelector('.input');\nconst button = document.querySelector('.button-submit');\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.group-form');\nconst loader = document.querySelector('.loader');\nconst LMbtn = document.querySelector('.lm-btn');\n\n\nform.addEventListener('submit', imageSearch);\nLMbtn.addEventListener('click', loadMore);\n\nloader.style.display = 'none';\nLMbtn.style.display = 'none';\n\nconst galleryModal = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nasync function imageSearch(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  if (!searchedValue.value.trim()) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter your search terms',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      messageColor: '#fff',\n      titleColor: '#fff',\n    });\n    return;\n  }\n  loader.style.display = 'inline-block';\n  try {\n    const sValue = await searchPhotos(searchedValue.value, page);\n    if (sValue.hits.length === 0) {\n      iziToast.show({\n        title: '',\n        backgroundColor: '#EF4040',\n        messageColor: '#FFFFFF',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topCenter',\n      });\n    }\n    page = 1;\n\n    gallery.insertAdjacentHTML('beforeend', createGallery(sValue.hits));\n    galleryModal.refresh();\n    loader.style.display = 'none';\n\n    if (page * per_page < sValue.totalHits) {\n      LMbtn.style.display = 'inline-block';\n    }\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nasync function loadMore() {\n  page += 1;\n  LMbtn.disabled = true;\n\n  LMbtn.style.display = 'none';\n  loader.style.display = 'inline-block';\n\n  try {\n    const sValue = await searchPhotos(searchedValue.value, page);\n\n    gallery.insertAdjacentHTML('beforeend', createGallery(sValue.hits));\n    galleryModal.refresh();\n    loader.style.display = 'none';\n\n    if (page * per_page >= sValue.totalHits) {\n      LMbtn.style.display = 'none';\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'bottomCenter',\n        timeout: 1000,\n      });\n      form.reset();\n    } else {\n      LMbtn.style.display = 'inline-block';\n    }\n\n    // Scroll\n    const pageHeight = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect().height;\n    window.scrollBy({\n      top: pageHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    LMbtn.disabled = false;\n  }\n}\n"],"names":["apiKey","searchPhotos","searchedValue","page","axios","error","_a","createGallery","imageArr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","per_page","gallery","form","loader","LMbtn","imageSearch","loadMore","galleryModal","SimpleLightbox","event","iziToast","sValue","pageHeight"],"mappings":"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"}